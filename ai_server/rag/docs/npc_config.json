[
  {
    "id": "npc1:not_started:trigger",
    "npc_id": "ella_herbalist",
    "quest_stage": "not_started",
    "trigger": {
      "text": ["jason", "help"],
      "item": ["old_scroll"],
      "player_action": ["talked_to_guard"]
    },
    "description": "ella_herbalist은 퀘스트 시작 전, 플레이어가 'jason'이라는 이름을 언급하고 'old_scroll' 아이템을 보유하며 경비병과 대화한 경우, 퀘스트를 시작할 수 있다.",
    "action": "start_quest",
    "flag": ["env_change", "quest_trigger"]
  },
  {
    "id": "npc1:in_progress:trigger",
    "npc_id": "ella_herbalist",
    "quest_stage": "in_progress",
    "trigger": {
      "text": ["key", "open"],
      "item": ["magic_key"],
      "player_action": ["unlocked_door"]
    },
    "description": "ella_herbalist은 퀘스트 진행 중, 플레이어가 'magic_key'를 사용해 문을 열면 다음 단계로 진행된다.",
    "action": "advance_quest",
    "flag": ["give_item", "env_change"]
  },
  {
    "id": "npc2:not_started:trigger",
    "npc_id": "tomson",
    "quest_stage": "not_started",
    "trigger": {
      "text": ["lost", "map"],
      "item": ["broken_compass"],
      "player_action": ["entered_forest"]
    },
    "description": "tomson은 플레이어가 숲에 들어가고 'broken_compass'를 가진 상태에서 길을 잃었다는 표현을 하면 도움을 준다.",
    "action": "give_hint",
    "flag": ["dialogue_branch"]
  },
  {
    "id": "mother_abandoned_factory_map1_in_progress_main_1",
    "content": "조건: items 포함 'photo_forgotten_party' 그리고 actions에 'visited_factory'. 지시: 신뢰도 +0.10, 관계 +0.20. FLAG 'npc_main_story' 설정. 대화 톤: 조심스럽지만 희망을 본다.",
    "metadata": {
      "npc_id": "mother_abandoned_factory",
      "location": "map1",
      "quest_stage": "in_progress",
      "type": "main",
      "require": {
        "items": ["photo_forgotten_party"],
        "actions": ["visited_factory"]
      },
      "delta": {"trust": 0.10, "relationship": 0.20},
      "flag": ["npc_main_story"]
    }
  },
  {
    "id": "mother_abandoned_factory_map1_in_progress_fallback_1",
    "content": "조건: required_text 미충족 또는 감정 임계 미만. 지시: 스토리 진행 금지. Style: guarded. NPC_Action: deflect. NPC_Emotion: suspicious.",
    "metadata": {
      "npc_id": "mother_abandoned_factory",
      "location": "map1",
      "quest_stage": "in_progress",
      "type": "fallback",
      "require": {},
      "fallback_style": {
        "style": "guarded",
        "npc_action": "deflect",
        "npc_emotion": "suspicious"
      }
    }
  }
]
